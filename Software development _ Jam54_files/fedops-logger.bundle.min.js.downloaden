!function(t,e){"object"==typeof exports&&"object"==typeof module?module.exports=e():"function"==typeof define&&define.amd?define("fedopsLogger",[],e):"object"==typeof exports?exports.fedopsLogger=e():t.fedopsLogger=e()}("undefined"!=typeof self?self:this,(function(){return function(t){var e={};function n(r){if(e[r])return e[r].exports;var o=e[r]={i:r,l:!1,exports:{}};return t[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=t,n.c=e,n.d=function(t,e,r){n.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:r})},n.r=function(t){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},n.t=function(t,e){if(1&e&&(t=n(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var r=Object.create(null);if(n.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var o in t)n.d(r,o,function(e){return t[e]}.bind(null,o));return r},n.n=function(t){var e=t&&t.__esModule?function(){return t.default}:function(){return t};return n.d(e,"a",e),e},n.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},n.p="https://static.parastorage.com/services/fedops-logger/5.337.0/",n(n.s=27)}([function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return o})),n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return a}));var r={},o=function(){return"undefined"!=typeof window?window:"undefined"!=typeof globalThis?globalThis:void 0!==t?t:"undefined"!=typeof WorkerGlobalScope?WorkerGlobalScope:r};function i(){return"undefined"!=typeof navigator&&navigator&&navigator.sendBeacon}function a(t){return navigator.sendBeacon(t)}}).call(this,n(13))},function(t,e,n){"use strict";n.d(e,"b",(function(){return i})),n.d(e,"c",(function(){return a})),n.d(e,"a",(function(){return s})),n.d(e,"d",(function(){return u})),n.d(e,"e",(function(){return c}));var r=n(0);function o(t){return((Object(r.a)().fedops||{}).apps||{})[t]}function i(){Object(r.a)().fedops=Object(r.a)().fedops||{},Object(r.a)().fedops.apps=Object(r.a)().fedops.apps||{}}function a(t){i(),function(t){Object(r.a)().fedops.apps[t]=Object(r.a)().fedops.apps[t]||{}}(t)}function s(t){return(o(t)||{}).startLoadTime||0}function u(t,e){return(o(t)||{}).startLoadTime=e}function c(t){return(Object(r.a)().fedops||{}).sessionId=t}},function(t,e,n){"use strict";n.d(e,"b",(function(){return r})),n.d(e,"c",(function(){return o})),n.d(e,"a",(function(){return i}));var r={policy:"getCurrentConsentPolicy",header:"_getConsentPolicyHeader",isMethod:!0},o={policy:"consentPolicy",header:"consentPolicyHeader",isMethod:!1},i={essential:!0,dataToThirdParty:!0,advertising:!0,functional:!0,analytics:!0}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getGlobal=e.getWindowIfTop=e.isBackoffice=e.isWebWorker=e.getHost=e.setHost=void 0;var r,o,i=n(9);function a(t){if("undefined"!=typeof window&&window)try{return window.top===window.self?t?t(window):window:null}catch(t){return null}return null}function s(t,e){return void 0===e&&(e=null),"undefined"!=typeof self&&self&&t(self)||e}e.setHost=function(t){r=t},e.getHost=function(t){return void 0===t&&(t=i.DefaultBrand),r||(void 0===o&&(o=s((function(t){return t.location&&t.location.hostname&&(t.location.hostname.match(/\.(wix|editorx)\.com$/)||[])[1]||null}),null)),"frog."+(o||i.BrandToHostMap[t]||i.BrandToHostMap[i.DefaultBrand])+".com")},e.isWebWorker=function(){return"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope},e.isBackoffice=function(){return a((function(t){var e=t.document;return i.BackofficeDomains.some((function(t){return-1!==e.location.host.indexOf(t)}))}))},e.getWindowIfTop=a,e.getGlobal=s},function(t,e,n){"use strict";(function(t){n.d(e,"a",(function(){return c}));var r,o=n(2);function i(){return window}function a(){return self}function s(){return t}function u(){return globalThis}function c(t){var e;void 0===t&&(t=void 0),t&&(r=t),r||t||([u,s,a,i].forEach((function(t){try{r||(r=t())}catch(t){}})),r=r);try{"object"==typeof r.commonConfig&&r.commonConfig.consentPolicy&&(e=d(r.commonConfig,o.c)),e||"object"!=typeof r.consentPolicyManager||(e=d(r.consentPolicyManager,o.b)),e||"object"!=typeof r.Wix||"object"!=typeof r.Wix.Utils||"function"!=typeof r.Wix.Utils.getCurrentConsentPolicy||(e=d(r.Wix.Utils,o.b))}catch(t){}return e}function d(t,e){return{getCurrentConsentPolicy:function(){var n=t[e.policy];return e.isMethod?n():n},_getConsentPolicyHeader:function(){var n=t[e.header];return e.isMethod?n():n},deleteReference:!e.isMethod}}}).call(this,n(13))},function(t,e,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};var o=function(t){function e(t){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}(this,(e.__proto__||Object.getPrototypeOf(e)).call(this,t));return n.name=n.constructor.name,n}return function(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}(e,Error),e}();t.exports.defined=function(t,e){if(void 0===t)throw new o(e)},t.exports.object=function(t,e){if(void 0!==t&&("object"!==(void 0===t?"undefined":r(t))||Array.isArray(t)||null===t))throw new o(e)},t.exports.ok=function(t,e){if(!t)throw new o(e)},t.exports.func=function(t,e){if(void 0!==t&&"function"!=typeof t)throw new o(e)},t.exports.boolean=function(t,e){if(void 0!==t&&"boolean"!=typeof t)throw new o(e)},t.exports.number=function(t,e){if(void 0!==t&&"number"!=typeof t)throw new o(e)},t.exports.array=function(t,e){if("function"==typeof Array.isArray){if(!Array.isArray(t))throw new o(e)}else if("[object Array]"!==Object.prototype.toString.call(t))throw new o(e)},t.exports.AssertionError=o},function(t,e,n){"use strict";var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=function(t,e){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return function(t,e){var n=[],r=!0,o=!1,i=void 0;try{for(var a,s=t[Symbol.iterator]();!(r=(a=s.next()).done)&&(n.push(a.value),!e||n.length!==e);r=!0);}catch(t){o=!0,i=t}finally{try{!r&&s.return&&s.return()}finally{if(o)throw i}}return n}(t,e);throw new TypeError("Invalid attempt to destructure non-iterable instance")},i=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};var a=n(33),s=n(34),u=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._initilized=!1}return r(t,[{key:"_reset",value:function(){var t=this;this._startTime=Date.now(),this._resolve=null,this._promise=new Promise((function(e){return t._resolve=e}))}},{key:"init",value:function(t,e){var n=this,r=t.delayMs,o=t.maxBatchSize,i=t.useThrottle,u=t.optimizeBatch;this._initilized||(this._maxBatchSize=o,this._optimizeBatch=u,this._queue=[],this._flushHandler=e,this._flushDebounced=i?s((function(){return n.flush()}),r):a((function(){return n.flush()}),r),this._initilized=!0,this._reset())}},{key:"flush",value:function(){if(!this._queue.length)return Promise.resolve();var t=this._queue.splice(0,this._queue.length),e=this._resolve,n=this._startTime;this._reset();var r=function(t,e){return{dt:Date.now()-e,e:t,g:{}}}(t,n);return this._optimizeBatch&&(r=function(t){var e={},n=t.e.length,r=t.e.map((function(t){var n=Object.keys(t.f).map((function(n){var r=t.f[n],o=n+"|"+r;return e[o]=e[o]||0,e[o]++,[n,r,o]}));return i({},t,{f:n})})),a={};return r=r.map((function(t){var r=t.f.reduce((function(t,r){var i=o(r,3),s=i[0],u=i[1],c=i[2];return e[c]===n?a[s]=u:t[s]=u,t}),{});return i({},t,{f:r})})),i({},t,{e:r,g:a})}(r)),this._flushHandler(r).then(e)}},{key:"feed",value:function(t,e){return this._queue.push(function(t,e,n){return{dt:Date.now()-n,f:t,context:e}}(t,e,this._startTime)),this._queue.length===this._maxBatchSize?this.flush():(this._flushDebounced(),this._promise)}}]),t}();t.exports=u},function(t,e,n){"use strict";var r,o=this&&this.__extends||(r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n])})(t,e)},function(t,e){function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)});Object.defineProperty(e,"__esModule",{value:!0}),e.APINotSupportedError=e.AssertionError=void 0;var i=function(t){function e(e){var n=t.call(this,e)||this;return n.name=n.constructor.name,n}return o(e,t),e}(Error);e.AssertionError=i;var a=function(t){function e(e){var n=t.call(this,e)||this;return n.name=n.constructor.name,n}return o(e,t),e}(Error);e.APINotSupportedError=a},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.readCookie=e.sendBeacon=e.getWindowSize=e.getDesktopSize=e.now=void 0,e.now=function(){return"undefined"!=typeof performance&&performance&&performance.now?performance.now():-1},e.getDesktopSize=function(t){return(t.screen&&t.screen.width||0)+"x"+(t.screen&&t.screen.height||0)},e.getWindowSize=function(t){var e=0,n=0;return t.innerWidth?(e=t.innerWidth,n=t.innerHeight):t.document&&(t.document.documentElement&&t.document.documentElement.clientWidth?(e=t.document.documentElement.clientWidth,n=t.document.documentElement.clientHeight):t.document.body&&t.document.body.clientWidth&&(e=t.document.body.clientWidth,n=t.document.body.clientHeight)),e+"x"+n},e.sendBeacon=function(t,e){return!("undefined"==typeof navigator||!navigator||!navigator.sendBeacon)&&navigator.sendBeacon(t,e)},e.readCookie=function(t){if("undefined"==typeof document)return null;for(var e=0,n=document.cookie.split(";");e<n.length;e++){for(var r=n[e].split("="),o=r[0],i=r[1];" "===o[0];)o=o.substr(1);if(o===t)return i}return""}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.DefaultCommonConfig=e.BrandToHostMap=e.DefaultBrand=e.EventContextMap=e.BackofficeDomains=e.LoggerVersion=void 0,e.LoggerVersion="2.0.985|C",e.BackofficeDomains=[".wix.com",".editorx.com"],function(t){t.msid="_msid",t.clientId="_client_id",t.uuid="_uuid",t.visitorId="_visitorId",t.siteMemberId="_siteMemberId",t.brandId="_brandId",t.siteBranchId="_siteBranchId",t.ms="_ms",t.lv="_lv"}(e.EventContextMap||(e.EventContextMap={})),e.DefaultBrand="wix",e.BrandToHostMap={wix:"wix",editorx:"editorx"},e.DefaultCommonConfig={brand:e.DefaultBrand}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.Errors=e.EventCategories=e.PublishMethods=void 0,function(t){t.Auto="auto",t.PostMessage="postMessage",t.Fetch="fetch"}(e.PublishMethods||(e.PublishMethods={})),function(t){t.Essential="essential",t.Functional="functional",t.Analytics="analytics"}(e.EventCategories||(e.EventCategories={})),function(t){t[t.Unsupported=0]="Unsupported"}(e.Errors||(e.Errors={}))},function(t,e,n){"use strict";n.r(e),n.d(e,"ConsentPolicyAccessor",(function(){return i}));var r=n(4),o=n(2),i=function(){function t(t){t&&(this.env=t),this.consentPolicyAccess=Object(r.a)(this.env)}return t.prototype.clearReference=function(){this.consentPolicyAccess&&this.consentPolicyAccess.deleteReference&&(this.consentPolicyAccess=void 0)},t.prototype.getCurrentConsentPolicy=function(){this.consentPolicyAccess||(this.consentPolicyAccess=Object(r.a)(this.env));var t=this.consentPolicyAccess&&this.consentPolicyAccess.getCurrentConsentPolicy()||o.a;return this.clearReference(),t.policy?t.policy:t},t.prototype.getConsentPolicyHeader=function(t){void 0===t&&(t=!1),this.consentPolicyAccess||(this.consentPolicyAccess=Object(r.a)(this.env));var e=this.consentPolicyAccess&&this.consentPolicyAccess._getConsentPolicyHeader()||{"consent-policy":""};return this.clearReference(),t?e["consent-policy"]:e},t}()},function(t){t.exports=JSON.parse('{"src":72,"persistentEndpoint":"performance","nonPersistentEndpoint":"fed","successRateRoot":"fedops_events","performanceRoot":"fedops_performance","appLoadStart":{"eventId":14},"appLoadFinish":{"eventId":11},"loadPhaseStart":{"eventId":12},"loadPhaseFinish":{"eventId":13},"interactionStart":{"eventId":15},"interactionEnd":{"eventId":16},"error":{"eventId":17},"resource":{"eventId":18}}')},function(t,e){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(t){"object"==typeof window&&(n=window)}t.exports=n},function(t,e,n){"use strict";var r=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var i=n(5),a=n(30),s=a.mapValues,u=a.filterValues,c=n(31),d=n(32),p=n(6),f=n(35),h=f.shouldMuteByCategory,l=f.shouldMuteNonEssentials,m=f.getPolicy,v=function(){function t(e,n){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._publishers=e.publishers,this._validators=e.validators||[],this._defaults=e.defaults,this._ownDefaults={},this._events=e.events||{},this._context=n||{},this._defaultValueTimeout=e.defaultValueTimeout||5e3,this._defaultContinueOnFail=e.defaultContinueOnFail||!1,this._onPublisherFailHandler=e.onPublisherFailHandler||t._defaultPublisherFailHandler,this._isMuted=e.isMuted||function(){return!1},this._eventTransformer=e.eventTransformer||function(t){return t},this._payloadTransformer=e.payloadTransformer||function(t){return t},this._consentPolicyGetter=e.consentPolicyGetter||function(){return null},this._nonEssentialDefaults=e.nonEssentialDefaults||{},this._maxBatchSize=e.maxBatchSize||100,this._globalBatchQueue=e.globalBatchQueue}return o(t,[{key:"report",value:function(t){i.defined(t,"Data must be provided"),i.object(t,"Data must be an object");var e=t.src,n=t.evid,o=t.params,a=function(t,e){var n={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n}(t,["src","evid","params"]);return this.log(r({src:e,evid:n},o),a)}},{key:"log",value:function(t,e,n){var o=this;i.defined(t,"Event object or event key must be provided.");var a=this._extractEventAndContext(t,e,n),s=a.event,u=a.context,c=m(this._consentPolicyGetter),d=r({},this._context,u);if(this._isMuted()||h(c,d.category))return Promise.resolve();if(d.useBatch){var p=this._initQueue(d,c),f=function(t){var e=o._eventTransformer(t,d);return p.feed(e,d)};if(this._globalBatchQueue)return this._getDefaults(this._defaults).then((function(t){var e=r({},t,o._getDynamicNonEssentialDefaults(c),o._getStaticNonEssentialDefaults(c),s,o._getPolicyFields(c,d.category));return f(e)}));var l=r({},this._getDynamicDefaults(this._defaults),this._getDynamicNonEssentialDefaults(c),s,this._getPolicyFields(c,d.category));return f(l)}return this._getDefaults(this._defaults).then((function(t){var e=Object.assign(t,o._getDynamicNonEssentialDefaults(c),o._getStaticNonEssentialDefaults(c),s,o._getPolicyFields(c,d.category));if(!(0===o._validators.length||o._validators.some((function(t){return t.match(e)&&(t.execute(e)||!0)}))))throw new Error("No validator accepted the event. Source: "+e.src+" Evid: "+(e.evid||e.evtId));var n=o._eventTransformer(e,d);return n=o._payloadTransformer(n,d),o._send(n,d)}))}},{key:"flush",value:function(){return this._queue?this._queue.flush():Promise.resolve()}},{key:"updateDefaults",value:function(t){return i.defined(t,"Defaults must be provided"),i.object(t,"Defaults must be an object"),Object.assign(this._ownDefaults,t),this}},{key:"_send",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Promise.all(this._publishers.map((function(o){var i=r({},t);return Promise.resolve().then((function(){return o(i,n)})).catch((function(n){return e._onPublisherFailHandler(n,{publisherName:o.name,payload:t})}))}))).then((function(){}))}},{key:"_extractEventAndContext",value:function(t,e,n){var o=void 0,a={};if("string"!=typeof t)o=t,a=e||a;else{if(!(o=this._events[t]))throw new i.AssertionError("Event with key '"+t+"' not found in event map.");e&&(o=r({},o,e),a=n||a)}return{event:o,context:a}}},{key:"_initQueue",value:function(t,e){var n=this;if(this._queue)return this._queue;this._queue=this._globalBatchQueue||new p;return this._queue.init({batchDelay:!0===t.useBatch?300:t.useBatch,maxBatchSize:this._maxBatchSize,useThrottle:!!this._globalBatchQueue,optimizeBatch:!!this._globalBatchQueue},(function(r){n._globalBatchQueue||(r.g=Object.assign(n._getStaticDefaults(n._defaults),n._getStaticNonEssentialDefaults(e)));var o=n._payloadTransformer(r,t);return n._send(o,t)})),this._queue}},{key:"_handleDefaultsError",value:function(t){return this._defaultContinueOnFail?(d.error(t),null):Promise.reject(t)}},{key:"_getDynamicNonEssentialDefaults",value:function(t){if(!l(t))return this._getDynamicDefaults(this._nonEssentialDefaults)}},{key:"_getStaticNonEssentialDefaults",value:function(t){if(!l(t))return this._getStaticDefaults(this._nonEssentialDefaults)}},{key:"_withOwnDefaults",value:function(t){return Object.assign({},t,this._ownDefaults)}},{key:"_getDynamicDefaults",value:function(t){t=this._withOwnDefaults(t);var e=u(t,(function(t){return"function"==typeof t}));return s(e,(function(t){return t()}))}},{key:"_getStaticDefaults",value:function(t){return t=this._withOwnDefaults(t),u(t,(function(t){return"function"!=typeof t}))}},{key:"_getDefaults",value:function(t){var e=this;if(!(t=this._withOwnDefaults(t)))return Promise.resolve({});var n=s(t,(function(t,n){if("function"==typeof t)try{t=t()}catch(t){return e._handleDefaultsError(t)}return t&&"function"==typeof t.then?c.timedPromise(t,{message:"Cannot get default value '"+n+" for BI Event'",timeout:e._defaultValueTimeout}).catch((function(t){return e._handleDefaultsError(t)})):t}));return c.allAsObject(n)}},{key:"_encodePolicyValue",value:function(t,e){return t?"boolean"==typeof t[e]?t[e]?1:0:t[e]:1}},{key:"_getPolicyFields",value:function(t,e){return{_isca:this._encodePolicyValue(t,"analytics"),_iscf:this._encodePolicyValue(t,"functional"),_ispd:t.__default?1:0,_ise:"essential"===e?1:0}}}],[{key:"_defaultPublisherFailHandler",value:function(t,e){return e.publisherName}}]),t}();t.exports=v},function(t,e,n){"use strict";var r=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var o=n(5),i=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.reset()}return r(t,[{key:"reset",value:function(){this._handlers=[]}},{key:"onLoggerCreated",value:function(t){var e=this;return o.defined(t,"Handler must be provided."),o.func(t,"Handler must be a function."),this._handlers.push(t),function(){var n=e._handlers.indexOf(t);-1!==n&&e._handlers.splice(n,1)}}},{key:"notifyLoggerCreated",value:function(t){this._handlers.forEach((function(e){return e(t)}))}}]),t}();t.exports={manager:new i,BiLoggerManager:i}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.guid=e.buildBiUrl=e.getCookies=void 0;var r=n(8),o=n(3),i=0;e.getCookies=function(t){return Object.keys(t).reduce((function(e,n){var o="string"==typeof t[n]?{name:t[n]}:t[n],i=o.name,a=o.transform,s=(void 0===a?function(t){return t}:a)(r.readCookie(i));return s&&(e[n]=s),e}),{})},e.buildBiUrl=function(t,e,n){var r=t.host,a=void 0===r?"":r,s=t.endpoint,u=void 0===s?"":s;void 0===n&&(n={}),a=(a="function"==typeof a?a():a)||o.getHost(),u=n.endpoint||u,n.useBatch||(e._=""+(new Date).getTime()+i++);var c=n.useBatch?[]:Object.keys(e).map((function(t){return encodeURIComponent(t)+"="+encodeURIComponent(e[t])}),[]);return["//"+a+"/"+u].concat(c.length?c.join("&"):[]).join("?")},e.guid=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)}))}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getBranchId=e.getBrand=e.getCommonConfigValue=void 0;var r=n(3),o=n(9);e.getCommonConfigValue=function(t,e){return void 0===e&&(e=r.getGlobal((function(t){return t.Wix&&t.Wix.Utils&&t.Wix.Utils.commonConfig||t.commonConfig}))),(e=e&&"function"==typeof e.getAll?e.getAll():e)&&void 0!==e[t]?e[t]:o.DefaultCommonConfig[t]},e.getBrand=function(t){return e.getCommonConfigValue("brand",t())},e.getBranchId=function(t){return e.getCommonConfigValue("branchId",t())}},function(t,e){},function(t,e,n){"use strict";n.d(e,"a",(function(){return r}));var r="fedops.logger.defaultOverrides"},function(t){t.exports=JSON.parse('{"src":72,"persistentEndpoint":"ds-performance","nonPersistentEndpoint":"ds-performance","successRateRoot":"ds_events","performanceRoot":"ds_performance","appLoadStart":{"eventId":31},"appLoadFinish":{"eventId":33},"interactionStart":{"eventId":34},"interactionEnd":{"eventId":35},"loadPhaseStart":{"eventId":38},"loadPhaseFinish":{"eventId":32},"error":{"eventId":36},"resource":{"eventId":37}}')},function(t){t.exports=JSON.parse('{"src":72,"persistentEndpoint":"editor-performance","nonPersistentEndpoint":"editor-performance","successRateRoot":"editor_events","performanceRoot":"editor_performance","appLoadStart":{"eventId":41},"appLoadFinish":{"eventId":43},"interactionStart":{"eventId":44},"interactionEnd":{"eventId":45},"loadPhaseStart":{"eventId":48},"loadPhaseFinish":{"eventId":42},"error":{"eventId":46},"resource":{"eventId":47}}')},function(t){t.exports=JSON.parse('{"src":72,"persistentEndpoint":"bolt-performance","nonPersistentEndpoint":"bolt-performance","successRateRoot":"bolt_events","performanceRoot":"bolt_performance","appLoadStart":{"eventId":21},"loadPhaseStart":{"eventId":28},"loadPhaseFinish":{"eventId":22},"appLoadFinish":{"eventId":23},"interactionStart":{"eventId":24},"interactionEnd":{"eventId":25},"error":{"eventId":26},"resource":{"eventId":27}}')},function(t){t.exports=JSON.parse('{"src":72,"persistentEndpoint":"ooi-performance","nonPersistentEndpoint":"ooi-performance","successRateRoot":"fedops_events","performanceRoot":"fedops_performance","appLoadStart":{"eventId":61},"appLoadFinish":{"eventId":63},"interactionStart":{"eventId":64},"interactionEnd":{"eventId":65},"loadPhaseStart":{"eventId":68},"loadPhaseFinish":{"eventId":62},"error":{"eventId":66},"resource":{"eventId":67}}')},function(t){t.exports=JSON.parse('{"src":72,"persistentEndpoint":"mobile-performance","nonPersistentEndpoint":"mobile-performance","successRateRoot":"fedops_events","performanceRoot":"fedops_performance","appLoadStart":{"eventId":51},"appLoadFinish":{"eventId":53},"interactionStart":{"eventId":54},"interactionEnd":{"eventId":55},"loadPhaseStart":{"eventId":58},"loadPhaseFinish":{"eventId":52},"error":{"eventId":56},"resource":{"eventId":57}}')},function(t,e,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},o=this&&this.__createBinding||(Object.create?function(t,e,n,r){void 0===r&&(r=n),Object.defineProperty(t,r,{enumerable:!0,get:function(){return e[n]}})}:function(t,e,n,r){void 0===r&&(r=n),t[r]=e[n]}),i=this&&this.__setModuleDefault||(Object.create?function(t,e){Object.defineProperty(t,"default",{enumerable:!0,value:e})}:function(t,e){t.default=e}),a=this&&this.__importStar||function(t){if(t&&t.__esModule)return t;var e={};if(null!=t)for(var n in t)"default"!==n&&Object.hasOwnProperty.call(t,n)&&o(e,t,n);return i(e,t),e};Object.defineProperty(e,"__esModule",{value:!0}),e.BiLoggerClientFactory=e.createBatchQueue=e.manager=e.factory=e.Factory=void 0;var s=n(28),u=n(11),c=a(n(36)),d=n(37),p=n(17),f=n(3),h=n(10),l=n(39),m=n(10);Object.defineProperty(e,"PublishMethods",{enumerable:!0,get:function(){return m.PublishMethods}}),Object.defineProperty(e,"EventCategories",{enumerable:!0,get:function(){return m.EventCategories}});var v=n(3);Object.defineProperty(e,"setHost",{enumerable:!0,get:function(){return v.setHost}});var g=function(){function t(e){void 0===e&&(e={}),this.options=e,this.commonConfigGetter=function(){},this.initialized=!1,c.ok(!e.publishMethod||-1!==Object.keys(h.PublishMethods).map((function(t){return h.PublishMethods[t]})).indexOf(e.publishMethod),'Unsupported publish method "'+e.publishMethod+'"'),t.consentPolicyAccessor=t.consentPolicyAccessor||new u.ConsentPolicyAccessor,this.loggerClientFactory=s.factory()}return t.prototype.initFactory=function(){var e=this;if(this.initialized)return this.loggerClientFactory;this.initialized=!0,this.updateDefaults(l.getCommonDefaults(this.commonConfigGetter,t.consentPolicyAccessor)),this.withUserContext(l.getUserDefaults());var n=r(r({},this.options),{host:this.options.host||function(){return f.getHost(p.getBrand(e.commonConfigGetter))}}),o=d.getPublisher(n,this.publishFunctions),i=d.getTransformers(n,this.transformer),a=i.eventTransformer,s=i.payloadTransformer,u=this.loggerClientFactory.addPublisher(o).withConsentPolicyGetter((function(){return t.consentPolicyAccessor.getCurrentConsentPolicy()}));return a&&u.withEventTransformer(a),s&&u.withPayloadTransformer(s),u},t.prototype.withTransformer=function(t){return c.defined(t,"Transformer must be provided"),c.ok("function"==typeof t||t&&"function"==typeof t[h.PublishMethods.PostMessage],"Valid transformer must be provided"),this.transformer=t,this},t.prototype.withPublishFunction=function(t){return c.defined(t,"Publish functions object must be provided"),c.ok(this.options.publishMethod&&this.options.publishMethod!==h.PublishMethods.Auto,"Publish function can be used only when using a custom publish method"),c.ok(t&&"function"==typeof t[this.options.publishMethod],"Valid publish function must be provided"),this.publishFunctions=t,this},t.prototype.withUserContext=function(t){return c.defined(t,"User context object must be provided"),this.updateDefaults(l.transformDefaults(t)),this},t.prototype.withUoUContext=function(t){return c.defined(t,"UoU context object must be provided"),this.updateDefaults(l.transformDefaults(t)),this},t.prototype.withNonEssentialContext=function(t){return c.defined(t,"Non-essential context object must be provided"),this.loggerClientFactory.updateNonEssentialDefaults(l.transformDefaults(t)),this},t.prototype.withCommonConfigGetter=function(t){return c.defined(t,"Common config getter must be provided"),c.ok("function"==typeof t,"Common config getter must be a function"),this.commonConfigGetter=t,this},t.prototype.updateDefaults=function(t){return this.loggerClientFactory.updateDefaults(t),this},t.prototype.setMuted=function(t){return this.loggerClientFactory.setMuted(t),this},t.prototype.setEvents=function(t){return this.loggerClientFactory.setEvents(t),this},t.prototype.setGlobalBatchQueue=function(t){return this.loggerClientFactory.setGlobalBatchQueue(t),this},t.prototype.onError=function(t){return this.loggerClientFactory.setPublisherFailHandler(t),this},t.prototype.logger=function(t){void 0===t&&(t={});var e=this.options,n=e.endpoint,o=e.useBatch;return this.initFactory().logger(r({endpoint:n,useBatch:o},t))},t}();e.Factory=g,e.factory=function(t){return void 0===t&&(t={}),new g(t)},e.manager=s.manager,e.createBatchQueue=s.createBatchQueue,e.BiLoggerClientFactory=s.BiLoggerFactory},function(t,e,n){"use strict";var r=n(18);n.o(r,"FEDOPS_OVERRIDES_COOKIE")&&n.d(e,"FEDOPS_OVERRIDES_COOKIE",(function(){return r.FEDOPS_OVERRIDES_COOKIE}));var o=n(19);n.d(e,"FEDOPS_OVERRIDES_COOKIE",(function(){return o.a}))},function(t,e,n){"use strict";n.r(e),n.d(e,"create",(function(){return kt})),n.d(e,"reportAppLoadStarted",(function(){return Ft})),n.d(e,"phasesConfig",(function(){return Ct}));var r=n(12),o=n(20),i=n(21),a=n(22),s=n(23),u=n(24),c="DEFAULT",d="DS",p="EDITOR",f="OOI",h="BOLT",l="MOBILE";function m(t){switch(t){case c:return r;case h:return a;case d:return o;case p:return i;case f:return s;case l:return u;default:return r}}var v,g=n(0),b=n(25),_=function(){function t(t){var e=t.biLoggerFactory,n=t.baseUrl,r=t.preset,o=t.useBatch;this._preset=r;var i=!(!1===o);this._factory=e||b.factory({host:n,useBatch:i}),this._publisher=this._factory.logger(),this._nonBatchedPublisher=this._factory.logger({useBatch:!1})}var e=t.prototype;return e.flush=function(){this._publisher.flush()},e.report=function(t,e,n){if(!t)return null;var r=e||this._preset.nonPersistentEndpoint;return n&&!1===n.useBatch?this._nonBatchedPublisher.log(t,{endpoint:r,category:"essential"}):this._publisher.log(t,{endpoint:r,category:"essential"})},t}();function y(t){var e=void 0===t?{}:t,n=e.biLoggerFactory,r=e.baseUrl,o=e.endpoint,i=e.preset,a=e.useBatch;return v?v({preset:i}):new _({biLoggerFactory:n,baseUrl:r,endpoint:o,preset:i,useBatch:a})}var I=n(11),P=function(){var t;return(null==(t=Object(g.a)().performance)||null==t.getEntriesByType?void 0:t.getEntriesByType("resource"))||[]},O=function(){var t;return(null==(t=Object(g.a)().performance)||null==t.getEntriesByType?void 0:t.getEntriesByType("mark"))||[]},w=function(){var t;null==(t=Object(g.a)().performance)||null==t.clearResourceTimings||t.clearResourceTimings()},S=function(){var t,e;return(null==(t=Object(g.a)().performance)||null==t.now?void 0:t.now())||"undefined"!=typeof performance&&(null==(e=performance)||null==e.now?void 0:e.now())||(new Date).getTime()},E=function(){var t,e,n,r,o=null==(t=performance)||null==(e=t.timing)?void 0:e.fetchStart,i=null==(n=performance)||null==(r=n.timing)?void 0:r.responseEnd;if(o&&i)return i-o},T=function(t){var e;null==(e=Object(g.a)().performance)||null==e.mark||e.mark(t)},x=function(t,e,n){var r;null==(r=Object(g.a)().performance)||null==r.measure||r.measure(t,e,n)},j=function(t){var e;return(null==(e=Object(g.a)().performance)||null==e.getEntriesByName?void 0:e.getEntriesByName(t))||[]},D=n(1),k=function(){function t(t){this.appName=t,this.apps={},this.apps[t]={}}var e=t.prototype;return e._getKeyForApp=function(t,e){return void 0===t&&(t=this.appName),e?t+"_"+e:t},e.setLoadStarted=function(t){var e=void 0===t?{}:t,n=e.appId,r=e.widgetId,o=this._getKeyForApp(n,r);this.apps[o]||(this.apps[o]={});var i=S();this.apps[o].startLoadTime=i,n||Object(D.d)(o,i)},e.getLoadStartTime=function(t){var e=void 0===t?{}:t,n=e.appId,r=e.widgetId,o=this._getKeyForApp(n,r),i=this.getLoadStartTimeFromInstance(o)||Object(D.a)(o)||0;return Math.floor(i)},e.getLoadStartTimeFromInstance=function(t){return this.apps[t]&&this.apps[t].startLoadTime},e.getAppLoadTime=function(t){var e=void 0===t?{}:t,n=e.appId,r=e.widgetId;return Math.floor(S()-this.getLoadStartTime({appId:n,widgetId:r}))},e.getFirstRequestDuration=function(t){var e=void 0===t?{}:t,n=e.appId,r=e.widgetId;return this.getLoadStartTime({appId:n,widgetId:r})},t}(),F=function(){function t(t){void 0===t&&(t=void 0),this.data=t}var e=t.prototype;return e.isActive=function(){return!0},e.export=function(){return this.data},t}(),C=function(){return void 0!==Object(g.a)()&&Object(g.a)().location},A=function(){return C()&&Object(g.a)().location.host},N=function(){return((C()||{}).search||"").indexOf("fedops=dev")>-1};function M(t,e){return(M=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var B={xmlhttprequest:{count:"countXhr",unsupported:"unsprtXhr",duration:"timeXhr",total:"sizeXhr",longest:"longXhr",http2:"h2Xhr"},script:{count:"countJs",unsupported:"unsprtJs",duration:"timeJs",total:"sizeJs",cached:"cachedJs",http2:"h2Js"},link:{count:"countCss",unsupported:"unsprtCss",duration:"timeCss",total:"sizeCss",cached:"cachedCss",http2:"h2Css"},img:{count:"countImg",unsupported:"unsprtImg",duration:"timeImg",total:"sizeImg",cached:"cachedImages",http2:"h2Images"},fetch:{count:"countFetch",unsupported:"unsprtFetch",duration:"timeFetch",total:"sizeFetch",cached:"cachedFetch",http2:"h2Fetch"},other:{count:"countOther",unsupported:"unsprtOther",duration:"timeOther",total:"sizeOther",cached:"cachedOther",http2:"h2Other"}},L={link:function(t){return/(.\.css$|.\.css?.)/g.test(t.name)}},R=function(t){return t.responseEnd-t.startTime};function H(t,e){var n=L[e];return t.filter((function(t){return e===t.initiatorType&&(!n||n(t))}))}function W(t){return!t.name.match(/http(s)?:\/\/frog.wix.com\//)}function V(t){return e=t.name,(n=A())&&-1===e.indexOf(n)&&0===t.transferSize&&0===t.requestStart;var e,n}function U(t){var e=t.filter((function(t){return!V(t)}));return Object.keys(B).reduce((function(n,r){var o=H(t,r),i=H(e,r),a=B[r];return n[a.count]=i.length,n[a.duration]=function(t){if(0===t.length)return 0;var e={startTime:1/0,responseEnd:0};return t.forEach((function(t){e.startTime>t.startTime&&(e.startTime=t.startTime),e.responseEnd<t.responseEnd&&(e.responseEnd=t.responseEnd)})),e.responseEnd-e.startTime}(i),n[a.total]=function(t){return t.reduce((function(t,e){return t+e.transferSize}),0)}(i),n[a.unsupported]=function(t){var e=t.length;if(0===e)return 0;var n=t.filter(V).length;return Math.round(n/e*100)}(o),n[a.http2]=function(t){if(0===t.length)return 0;var e=!1,n=Math.round(t.filter((function(t){return e=e||"nextHopProtocol"in t,"h2"===t.nextHopProtocol})).length/t.length*100);return e?n:NaN}(o),a.longest&&(n[a.longest]=function(t){if(0===t.length)return 0;var e=t.reduce((function(t,e){return R(e)>=R(t)?e:t}));return R(e)}(i)),a.cached&&(n[a.cached]=function(t){if(0===t.length)return 0;var e=t.filter((function(t){return 0===t.transferSize}));return Math.round(e.length/t.length*100)}(i)),n}),{})}function z(t){return{url:t.name,downloadDuration:t.responseEnd-t.startTime,bytesTransferred:t.transferSize,isHTTP2:"h2"===t.nextHopProtocol}}var G=function(t){var e,n;function r(){return t.apply(this,arguments)||this}return n=t,(e=r).prototype=Object.create(n.prototype),e.prototype.constructor=e,M(e,n),r.prototype.performNetworkAnalysis=function(t){if(0===t.length)return null;var e=S(),n=t.filter(W),r=U(n);r.overhead=S()-e;var o=function(t){return Object.keys(t).reduce((function(e,n){var r=parseInt(t[n]);return isNaN(r)||"number"!=typeof r||(e[n]=r),e}),{})}(r);if(console.debug&&N()){var i=function(t){var e=t.reduce((function(t,e){return V(e)?t.unsupported.push(e):t.supported.push(e),t}),{supported:[],unsupported:[]});return Object.keys(B).reduce((function(t,n){return t[n]={},t[n].supported=H(e.supported,n).map((function(t){return z(t)})),t[n].unsupported=H(e.unsupported,n).map((function(t){return z(t)})),t}),{})}(n);console.debug("[fedops network analysis] [bytes analysis]\n"+JSON.stringify(o,null,4)),console.debug("[fedops network analysis] [resources breakdown]\n",i)}return o},r}(F),q=Object.keys(B).reduce((function(t,e){return t.concat(Object.values(B[e]))}),[]),Q=function(){function t(t){var e=this;void 0===t&&(t=null),this.items=[],t&&(void 0===t.length?[t]:t).forEach((function(t){return e.addItem(t)}))}var e=t.prototype;return e.clone=function(){return new t(this.items.slice())},e.addItem=function(t){return this.items.push(t instanceof F?t:new F(t)),this},e.mergeItems=function(){for(var t={},e=0;e<this.items.length;e++){var n=this.items[e];if(!n.isActive()){t=null;break}var r=n.export();for(var o in r)r.hasOwnProperty(o)&&(t[o]=r[o])}return t},e.mergePhasesItems=function(){for(var t={},e=0;e<this.items.length;e++){var n=this.items[e];if(!n.isActive()){t=null;break}var r=n.export();for(var o in r)r.hasOwnProperty(o)&&(q.includes(o)&&"number"==typeof t[o]?t[o]+=r[o]:t[o]=r[o])}return t},t}(),J=function(t){try{return Object(g.a)().localStorage&&Object(g.a)().localStorage.getItem(t)}catch(t){}},K=function(t,e){try{return Object(g.a)().localStorage&&Object(g.a)().localStorage.setItem(t,e)}catch(t){}},X=function(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,(function(t){var e=16*Math.random()|0;return("x"===t?e:3&e|8).toString(16)}))},$=/\[fedops] phase:([^ ]+) ([^ ]+) ?(.*) (started|finished)/,Y=/\[fedops] ([^ ]+) interaction ([^ ]+) (started|ended)/,Z=function(t){return!isNaN(parseFloat(t))&&isFinite(t)},tt={getSessionId:function(){var t=void 0!==Object(g.a)()&&Object(g.a)().fedops&&Object(g.a)().fedops.sessionId;return t=(t=t||J("fedops.logger.sessionId"))||X(),Object(D.e)(t),K("fedops.logger.sessionId",t),t}},et=function(){function t(t,e){this.appName=t,this.phases=new Map,this.indexToKey=new Map,this.times=e||new k(t)}t._getIndexForPhase=function(t){var e=t.name,n=t.appId,r=void 0===n?"":n,o=t.widgetId;return e+"_"+r+"_"+(void 0===o?"":o)};var e=t.prototype;return e.getAppLoadingPhaseData=function(e){var n=e.name,r=e.appId,o=e.widgetId;return this.phases.get(t._getIndexForPhase({name:n,appId:r,widgetId:o}))},e.saveLoadingPhase=function(e){var n=e.name,r=e.appId,o=e.widgetId,i=t._getIndexForPhase({name:n,appId:r,widgetId:o});if(!this.phases.has(i)){var a=this.phases.size;this.phases.set(i,{name:n,phaseStartTime:S(),index:a}),this.indexToKey.set(a,i)}},e.endLoadingPhase=function(e){var n=e.name,r=e.appId,o=e.widgetId,i=e.widgetArray,a=t._getIndexForPhase({name:n,appId:r,widgetId:o});if(this.phases.has(a)&&!this.phases.get(a).duration){var s=this.phases.get(a);s.duration=S()-s.phaseStartTime,i&&(s.widgetArray=i),o&&(s.widgetId=o),this.phases.set(a,s)}},e.getNextPhaseToReport=function(){var t=this.phases.size-1,e=this.indexToKey.get(t);return this.phases.get(e)},e.getPhasePreviousTo=function(e){var n=e.name,r=e.appId,o=e.widgetId,i=this.phases.get(t._getIndexForPhase({name:n,appId:r,widgetId:o})),a=this.indexToKey.get(i.index-1);return this.phases.get(a)},e.getPhases=function(t){var e=(void 0===t?{}:t).appId;return Array.from(this.phases).filter((function(t){var n=t[0].split("_")[1];return e&&n===e||!e})).map((function(t){return function(t){var e;return(e={})[t.name]=t,e}(t[1])}))},e.createCodeParsingPhaseIfNotExist=function(e){var n=void 0===e?{}:e,r=n.appId,o=n.widgetId,i=t._getIndexForPhase({name:"code-parsing-phase",appId:r,widgetId:o});if(!this.phases.has(i)){var a=this.times.getLoadStartTime({appId:r,widgetId:o});this.phases.set(i,{phaseStartTime:a,index:0,name:"code-parsing-phase"}),this.indexToKey.set(0,i)}},t}();function nt(t,e){return(nt=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var rt=function(t){var e,n;function r(e){var n,r=e.appId,o=e.widgetId,i=e.isServerSide,a=e.widgetArray;return(n=t.call(this)||this).data=n._filterUndefined({appId:r,widgetId:o,isServerSide:i,widgetArray:a}),n}return n=t,(e=r).prototype=Object.create(n.prototype),e.prototype.constructor=e,nt(e,n),r.prototype._filterUndefined=function(t){var e={};return Object.keys(t).forEach((function(n){t[n]&&(e[n]=t[n])})),e},r}(F);function ot(t,e){return(ot=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}var it=function(t){var e,n;function r(e){return t.call(this,{duration:e})||this}return n=t,(e=r).prototype=Object.create(n.prototype),e.prototype.constructor=e,ot(e,n),r.prototype.setFirstRequestDuration=function(t){return this.data.frd=t,this},r}(F);function at(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(n)return(n=n.call(t)).next.bind(n);if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return st(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return st(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function st(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function ut(t){delete t[Object.getOwnPropertyNames(t)[0]].index}var ct=function(){function t(t,e){this._sessionId=t,this._preset=e}var e=t.prototype;return e.biAppLoadStart=function(){return this._biDataItem(this._preset.appLoadStart.eventId)},e.biAppLoadFinish=function(){return this._biDataItem(this._preset.appLoadFinish.eventId)},e.biInteractionStart=function(){return this._biDataItem(this._preset.interactionStart.eventId)},e.biInteractionEnd=function(){return this._biDataItem(this._preset.interactionEnd.eventId)},e.biLoadPhaseStart=function(){return this._biDataItem(this._preset.loadPhaseStart.eventId)},e.biLoadPhaseFinish=function(){return this._biDataItem(this._preset.loadPhaseFinish.eventId)},e.biHttpRequest=function(){return this._biDataItem(this._preset.httpRequest.eventId)},e.biHttpResponse=function(){return this._biDataItem(this._preset.httpResponse.eventId)},e.biHttpResponseTime=function(){return this._biDataItem(this._preset.httpResponseTime.eventId)},e.biBlackbox=function(t){var e={environment:500,"initial-paint":501,loaded:502,visibility:503,"first-input":504,"page-transition":505,crux:506,"crux-cls":507,responsiveness:508}[t.entryType];return e&&this._biDataItem(e)},e.blackboxPerformance=function(t){return this.dataItem(t)},e.webVitalsLoaded=function(){return this._biDataItem(29)},e.webVitalsFirstInput=function(){return this._biDataItem(39)},e.biError=function(){return this._biDataItem(this._preset.error.eventId)},e.appName=function(t){var e=t.appName,n=t.isServerSide;return this.dataItem({appName:n?e+"_ssr":e})},e.artifact=function(t){var e=t.id,n=t.version,r=t.isRollout;return this.dataItem({artifactId:e,artifactVersion:n,isRollout:r})},e.appContext=function(t){return new rt(t)},e.customParams=function(t){return this.dataItem({customParams:t})},e.duration=function(t){return new it(t)},e.loadingPhaseCollection=function(t){var e=JSON.stringify(function(t){for(var e,n={},r=at(t);!(e=r()).done;){var o=e.value;ut(o),n=Object.assign(n,o)}return n}(t));return this.dataItem({phases:e})},e.loadingPhaseStart=function(t){var e=t.name;return this.dataItem({name:e})},e.loadingPhaseFinish=function(t){var e=t.name,n=function(t){return Math.floor(S()-t)}(t.phaseStartTime);return this.dataItem({name:e,duration:n})},e.resource=function(){var t=this._asBiEvent(this._preset.resource.eventId);return new G(t)},e.dataItem=function(t){return new F(t)},e._biDataItem=function(t){var e=this._asBiEvent(t);return this.dataItem(e)},e._asBiEvent=function(t){return{src:this._preset.src,evid:t,session_id:this._sessionId,_:(new Date).getTime()}},t}(),dt={SEND_ON_START:"SEND_ON_START",SEND_ON_FINISH:"SEND_START_AND_FINISH",SEND_ON_APP_LOADED:"SEND_ON_START",SEND_START_AND_FINISH:"SEND_START_AND_FINISH"},pt=n(26);function ft(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function ht(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?ft(Object(n),!0).forEach((function(e){lt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):ft(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function lt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var mt=function(){function t(){var t;this._overridesCookie=null!=(t=this._getOverridesFromWindow())?t:this._getOverridesFromDocumentCookieIfExists()}var e=t.prototype;return e.getCookieOverridesForApp=function(t){return Object.assign({},this._overridesCookie.paramsOverrides,this._overridesCookie.paramsOverridesForApp&&this._overridesCookie.paramsOverridesForApp[t])},e._getOverridesFromDocumentCookieIfExists=function(){try{var t=function(t){if(!Object(g.a)().document||!Object(g.a)().document.cookie)return"";var e=Object(g.a)().document.cookie.split(";").map((function(t){return t.trim().split("=")})).filter((function(e){return e[0]===t}))[0];return e?e[1]:""}(pt.FEDOPS_OVERRIDES_COOKIE),e=(n=t,function(){try{return JSON.parse(JSON.parse(n))}catch(t){return null}}()||function(){try{return JSON.parse(decodeURIComponent(n))}catch(t){return null}}());return e&&"object"==typeof e?(e.paramsOverridesForApp&&(e.paramsOverridesForApp=Object.entries(e.paramsOverridesForApp).reduce(vt,{})),this._persistOverridesToWindow(e),e):{}}catch(t){return console.log(t),{}}var n},e._persistOverridesToWindow=function(t){Object(g.a)().__DEFAULT_FEDOPS_OVERRIDES__=t},e._getOverridesFromWindow=function(){return Object(g.a)().__DEFAULT_FEDOPS_OVERRIDES__},t}();function vt(t,e){var n,r=e[0],o=e[1];return ht(ht({},t),{},((n={})[r.replace(/\./g,"-")]=o,n))}var gt={src:72,endpoint:"http-client-poc",httpRequest:{eventId:1100},httpResponse:{eventId:1101},httpResponseTime:{eventId:1102}},bt=function(){var t,e,n=new Promise((function(n,r){t=n,e=r}));return n.resolve=t,n.reject=e,n};function _t(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function yt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?_t(Object(n),!0).forEach((function(e){It(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):_t(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function It(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function Pt(t,e){var n="undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(n)return(n=n.call(t)).next.bind(n);if(Array.isArray(t)||(n=function(t,e){if(!t)return;if("string"==typeof t)return Ot(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);"Object"===n&&t.constructor&&(n=t.constructor.name);if("Map"===n||"Set"===n)return Array.from(t);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ot(t,e)}(t))||e&&t&&"number"==typeof t.length){n&&(t=n);var r=0;return function(){return r>=t.length?{done:!0}:{done:!1,value:t[r++]}}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function Ot(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function wt(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}var St="wixPerformanceMeasurements",Et=function(t,e){if(t)return t(e)},Tt=function(){function t(t,e,n,r){var o={appId:null,widgetId:null,metasiteId:null,sessionId:tt.getSessionId(),isServerSide:null,disableAutoLoadFinish:!1,phasesConfig:dt.SEND_ON_START,interactionTimeout:null,timeoutHook:null,startHook:null,endHook:null,isPersistent:!1,corrId:X(),presetType:c,customParams:{},paramsOverrides:{}},i=Object.assign({},o,r);this.appName=t,this.appVersion=e,this.appId=i.appId,this.widgetId=i.widgetId,this.metasiteId=i.metasiteId,this.corrId=i.corrId,this.isServerSide=i.isServerSide,this.params={sessionId:i.sessionId},this.httpMonitoringDataItems=new ct(this.sessionId,gt),this.httpMonitoringReporter=y({preset:gt}),this._customParams=Object.assign({},i.customParams),this.disableAutoLoadFinish=i.disableAutoLoadFinish,this.phasesConfig=i.phasesConfig,this._appLoadedCalled={},this._appStartLoadCalled={},this._presetType=i.presetType,this._preset=m(this._presetType),this._constructorParamsOverrides=i.paramsOverrides,this._cookiesParamsOverrides=new mt,this.dataItems=new ct(this.sessionId,this._preset),this.reporter=n||y({preset:this._preset}),this._times=new k(t),this.loadingPhases=new et(t,this._times),this.dataSourceBase=new Q,this.dataSourceBase.addItem(this.dataItems.appName({appName:t,isServerSide:this.isServerSide})).addItem(this.dataItems.dataItem({corrId:this.corrId,is_rollout:!1})).addItem(this.dataItems.dataItem(i.paramsOverrides)),r&&r.artifactData&&this.dataSourceBase.addItem(this.dataItems.artifact(r.artifactData)),this._outgoingInteractions={},this._outgoingHttpRequests={},this.interactionTimeout=i.interactionTimeout,this.timeoutHook=i.timeoutHook,this.startHook=i.startHook,this.endHook=i.endHook,this.isPersistent=i.isPersistent,this._firstErrorFiredInFlow={},this._platformTenantsPromise=bt(),this._webVitalsLoadedPromise=bt(),this._webVitalsFirstInputPromise=bt(),i.reportBlackbox&&this._handleBlackboxPerformance(),this._reportWebVitalsWhenAvailable()}var e,n,r,o=t.prototype;return o._report=function(t,e,n){return this.reporter.report(t.mergeItems(),e,n)},o._reportHttpMonitoring=function(t){return this.httpMonitoringReporter.report(t.mergeItems(),gt.endpoint)},o._reportPhases=function(t,e){return this.reporter.report(t.mergePhasesItems(),e)},o.getAppName=function(){return this.appName},o.getAppVersion=function(){return this.appVersion},o.getReporter=function(){return this.reporter},o.getHttpMonitoringReporter=function(){return this.httpMonitoringReporter},o.getParam=function(t){return this.params[t]},o._isDisableAutoLoadFinish=function(){return this.disableAutoLoadFinish},o.isDisableAutoLoadFinish=function(){return this._isDisableAutoLoadFinish()},o.reportNetworkAnalysis=function(t){var e=this,n=t.appId,r=P();setTimeout((function(){try{var t=e.dataItems.resource(),o=t.performNetworkAnalysis(r);if(!o)return;var i=e.dataSource.addItem(t).addItem(o).addItem(e._getDataItemWithDefaultParamsOverrides({appName:n}));n&&e._changeAppNameForEvent(i,n),e._report(i)}catch(t){console.error("[fedops] Failed to report resource metrics",t)}}),1e3)},o._getAppLoadingPhaseMarksForApp=function(t){var e=t.appId,n=O(),r=[];return n.forEach((function(t){var n=function(t){var e=$.exec(t);if(e)return{phaseName:e[1],appId:e[2],widgetId:e[3]}}(t.name);if(n&&n.appId===e&&!n.widgetId){var o=t.startTime,i=t.name,a=Object.assign({},{startTime:o,name:i},n);r.push(a)}})),r},o._getTimesOfPhase=function(t){var e,n,r=t.phaseName,o=t.appPhasesMarks,i=t.appId;return{startMarkTime:null==(e=o.find((function(t){return t.name==="[fedops] phase:"+r+" "+i+" started"})))?void 0:e.startTime,finishMarkTime:null==(n=o.find((function(t){return t.name==="[fedops] phase:"+r+" "+i+" finished"})))?void 0:n.startTime}},o._getPhaseNamesFromMarks=function(t){return new Set(t.map((function(t){return t.phaseName})))},o.reportAppPhasesNetworkAnalysis=function(t){var e=this,n=t.appId,r=this._getAppLoadingPhaseMarksForApp({appId:n}),o=this._getPhaseNamesFromMarks(r),i=P(),a=this.dataSource,s=this.dataItems.resource();a.addItem(s);for(var u,c=Pt(o);!(u=c()).done;){var d=u.value;try{!function(){var t=e._getTimesOfPhase({phaseName:d,appPhasesMarks:r,appId:n}),o=t.startMarkTime,u=t.finishMarkTime,c=i.filter((function(t){return t.startTime>o&&t.startTime+t.duration<u})),p=s.performNetworkAnalysis(c);p&&a.addItem(p)}()}catch(t){console.error('[fedops] Failed to report resource metrics for "'+d+'" phase',t)}}a.items.find((function(t){return void 0!==t.data.countXhr}))&&(this._changeAppNameForEvent(a,n),this._reportPhases(a))},o.appLoadStarted=function(e){var n=void 0===e?{}:e,r=n.appId,o=n.paramsOverrides;if(!(r&&this._appStartLoadCalled[r]||!r&&this._appStartLoadCalled[this.appName])){t._markAppLoadStarted(this.appName),this._appStartLoadCalled[r||this.appName]=!0,this._times.setLoadStarted({appId:r});var i=this.dataSource.addItem(this.dataItems.biAppLoadStart()).addItem(this.dataItems.appContext({appId:r||this.appId,widgetId:this.widgetId,isServerSide:this.isServerSide})).addItem(this._getDataItemWithDefaultParamsOverrides({appName:r})).addItem(this.dataItems.dataItem(o));return r&&this._changeAppNameForEvent(i,r),this._report(i,this._getEndpoint())}},o.httpRequest=function(t){var e=t.artifactId,n=t.method,r=t.url,o=this._getUrlTemplate(r);this._outgoingHttpRequests[o]={timestamp:S()};var i=this.dataSource.addItem(this.httpMonitoringDataItems.biHttpRequest()).addItem({artifactId:e,method:n,url:o});this._reportHttpMonitoring(i)},o.httpResponse=function(t){var e=t.artifactId,n=t.method,r=t.statusCode,o=t.url,i=this._getUrlTemplate(o);if(!this._outgoingHttpRequests[i])throw new Error("To use httpResponse you must use httpRequest first");var a=this._outgoingHttpRequests[i].timestamp,s=S(),u=Math.floor(s-a),c=this.dataSource.addItem(this.httpMonitoringDataItems.biHttpResponse()).addItem({artifactId:e,method:n,responseTime:u,status_code:r,url:i});this._httpResponseTime({artifactId:e,method:n,responseTime:u,url:i}),this._reportHttpMonitoring(c)},o._httpResponseTime=function(t){var e=t.artifactId,n=t.method,r=t.responseTime,o=t.url,i=this.dataSource.addItem(this.httpMonitoringDataItems.biHttpResponseTime()).addItem({artifactId:e,method:n,responseTime:r,url:o});return this._reportHttpMonitoring(i)},o._getUrlTemplate=function(t){var e=function(t){try{return new URL(t)}catch(o){var e,n,r;return{pathname:t,origin:null!=(e=null==(n=Object(g.a)())||null==(r=n.location)?void 0:r.origin)?e:""}}}(t);return e.origin+"/"+e.pathname.split("/").filter((function(t){return!!t})).map((function(t){return function(t){return Z(t)?":param":t}(t)})).join("/")},o._shouldAddCustomParams=function(t){var e=function(t){return t&&0===Object.keys(t).length&&t.constructor===Object},n=e(this._customParams)&&e(t),r=(new I.ConsentPolicyAccessor).getCurrentConsentPolicy(),o=r.functional,i=r.analytics;return!n&&(o&&i)},o._addCustomParamsToEvent=function(t,e){var n="string"==typeof e?JSON.parse(e):e;if(e=Object.assign({},this._customParams,n),Object.keys(e).length>0){var r=JSON.stringify(e);t.addItem(this.dataItems.customParams(r))}},o.appLoaded=function(e){var n=void 0===e?{}:e,r=n.appId,o=n.customParams,i=n.paramsOverrides;if(!(r&&this._appLoadedCalled[r]||!r&&this._appLoadedCalled[this.appName])){t._clearLoadTimeout(),t._markAndMeasureAppLoad(this.appName),this._appLoadedCalled[r||this.appName]=!0,this._sendLastAppLoadPhaseIfNeeded(),this.reportNetworkAnalysis({appId:r});var a=this.dataSource.addItem(this.dataItems.biAppLoadFinish()).addItem(this.dataItems.appContext({appId:r||this.appId,widgetId:this.widgetId,isServerSide:this.isServerSide})).addItem(this.dataItems.duration(this._times.getAppLoadTime({appId:r})).setFirstRequestDuration(this._times.getFirstRequestDuration())).addItem(this._getDataItemWithDefaultParamsOverrides({appName:r})).addItem(this.dataItems.dataItem(i));return r&&this._changeAppNameForEvent(a,r),this._shouldAddCustomParams(o)&&this._addCustomParamsToEvent(a,o),this._report(a,this._getEndpoint())}},o.appLoadingPhaseStart=function(t,e){var n=void 0===e?{}:e,r=n.appId,o=n.widgetId,i=n.paramsOverrides;this.loadingPhases.createCodeParsingPhaseIfNotExist({appId:r,widgetId:o}),this.loadingPhases.saveLoadingPhase({name:t,appId:r,widgetId:o}),this._sendPreviousPhaseIfNeeded(t,{appId:r,widgetId:o,paramsOverrides:i}),T("[fedops] "+t+" started"),T("[fedops] phase:"+t+" "+r+(o?" "+o:"")+" started");var a=this.dataSource.addItem(this.dataItems.biLoadPhaseStart()).addItem(this.dataItems.appContext({appId:r,widgetId:o})).addItem(this.dataItems.loadingPhaseStart({name:t})).addItem(this._getDataItemWithDefaultParamsOverrides({appName:r})).addItem(this.dataItems.dataItem(i));r&&this._changeAppNameForEvent(a,r),this._report(a,this._getEndpoint())},o._changeAppNameForEvent=function(t,e){t.addItem(this.dataItems.appName({appName:e,isServerSide:this.isServerSide}))},o._sendPreviousPhaseIfNeeded=function(t,e){var n=void 0===e?{}:e,r=n.appId,o=n.widgetId,i=n.paramsOverrides,a=this.loadingPhases.getPhasePreviousTo({name:t,appId:r,widgetId:o});if(this.phasesConfig===dt.SEND_ON_START||a&&"code-parsing-phase"===a.name){T("[fedops] "+a.name+" finished");var s=this.dataItems.loadingPhaseFinish(a),u=this.dataItems.biLoadPhaseFinish(),c=this.dataItems.dataItem(i),d=this.dataSource.addItem(s).addItem(u).addItem(this._getDataItemWithDefaultParamsOverrides({appName:r})).addItem(c);this._report(d)}},o.appLoadingPhaseFinish=function(t,e){var n=void 0===e?{}:e,r=n.appId,o=n.widgetId,i=n.widgetArray,a=n.paramsOverrides;if(this.phasesConfig===dt.SEND_ON_START)throw new Error('To use appLoadingPhaseFinish you must use "phasesConfig: SEND_START_AND_FINISH" setting');T("[fedops] "+t+" finished"),T("[fedops] phase:"+t+" "+r+(o?" "+o:"")+" finished");var s=this.loadingPhases.getAppLoadingPhaseData({name:t,appId:r,widgetId:o});if(!s)throw new Error("Cannot report end of a phase that wasn't started. Phase "+t+" doesn't exist");var u=this.dataItems.loadingPhaseFinish(s),c=this.dataItems.biLoadPhaseFinish(),d=this._getDataItemWithDefaultParamsOverrides({appName:r}),p=this.dataItems.dataItem(a),f=this.dataItems.appContext({appId:r,widgetId:o,widgetArray:i,isServerSide:this.isServerSide}),h=this.dataSource.addItem(u).addItem(c).addItem(f).addItem(d).addItem(p);return r&&this._changeAppNameForEvent(h,r),this._report(h,this._getEndpoint())},o._getEndpoint=function(){return this.isPersistent?this._preset.persistentEndpoint:this._preset.nonPersistentEndpoint},o._getDataItemWithDefaultParamsOverrides=function(t){var e=(void 0===t?{}:t).appName,n=void 0===e?null:e;return this.dataItems.dataItem(yt(yt({},this._cookiesParamsOverrides.getCookieOverridesForApp(n||this.appName)),this._constructorParamsOverrides))},o._sendLastAppLoadPhaseIfNeeded=function(){var t=this.loadingPhases.getNextPhaseToReport();this.phasesConfig===dt.SEND_ON_START&&t&&"code-parsing-phase"!==t.name&&this._report(this.dataSource.addItem(this.dataItems.loadingPhaseFinish(t)).addItem(this.dataItems.biLoadPhaseFinish()))},t._clearLoadTimeout=function(){Object(g.a)()&&Object(g.a)().fedops&&"function"==typeof Object(g.a)().fedops.clearLoadTimeout&&Object(g.a)().fedops.clearLoadTimeout()},o.clearResourceTimings=function(){w()},t._markAppLoadStarted=function(t){T("[fedops] "+t+" app-load-started")},t._markAndMeasureAppLoad=function(t){T("[fedops] "+t+" app-loaded");try{x("[fedops] "+t+" app-loaded","[fedops] "+t+" app-load-started","[fedops] "+t+" app-loaded")}catch(t){}},o._markInteractionStarted=function(t){T("[fedops] "+this.appName+" interaction "+t+" started")},o._markAndMeasureInteractionEnded=function(t,e){if(e){T("[fedops] "+this.appName+" interaction "+t+" ended");try{x("[fedops] "+t+" duration","[fedops] "+this.appName+" interaction "+t+" started","[fedops] "+this.appName+" interaction "+t+" ended")}catch(t){}}},o.interactionStarted=function(t,e){var n=this,r=void 0===e?{}:e,o=r.timeOverride,i=r.interactionTimeout,a=r.startHook,s=r.timeoutHook,u=r.customParams,c=r.paramsOverrides;this._markInteractionStarted(t);var d=this.dataSource.addItem({name:t}).addItem(this.dataItems.biInteractionStart()).addItem(this._getDataItemWithDefaultParamsOverrides()).addItem(this.dataItems.dataItem(c));return this._shouldAddCustomParams(u)&&this._addCustomParamsToEvent(d,u),this._outgoingInteractions[t]={timestamp:o||S(),timeout:i||this.interactionTimeout},this._report(d),Et(a||this.startHook,{name:t}),{timeoutId:function(){if(i||n.interactionTimeout)return setTimeout((function(){var e=n.dataSource.addItem({interactionName:t}).addItem({errorType:"timeout"}).addItem(n.dataItems.biError());n._report(e),Et(s||n.timeoutHook,{name:t,timeout:i||n.interactionTimeout})}),i||n.interactionTimeout)}()}},o.interactionEnded=function(t,e){var n=void 0===e?{}:e,r=n.timeOverride,o=n.timeoutId,i=n.endHook,a=n.customParams,s=n.paramsOverrides,u=this._outgoingInteractions[t];this._markAndMeasureInteractionEnded(t,u),o&&clearTimeout(o);var c=this._outgoingInteractions[t]||this._getInteractionFromWindowIfPresent(t),d=r||S(),p=c?Math.floor(d-c.timestamp):"";Et(i||this.endHook,{name:t,duration:p,timeout:this._outgoingInteractions[t]&&this._outgoingInteractions[t].timeout});var f=this.dataSource.addItem({name:t}).addItem({duration:p}).addItem(this.dataItems.biInteractionEnd()).addItem(this._getDataItemWithDefaultParamsOverrides()).addItem(this.dataItems.dataItem(s));this._shouldAddCustomParams(a)&&this._addCustomParamsToEvent(f,a),delete this._outgoingInteractions[t],this._report(f)},o._getInteractionsObjectFromWindow=function(){var t,e,n,r;return(null==(t=Object(g.a)())||null==(e=t.fedops)||null==(n=e.apps)||null==(r=n[this.appName])?void 0:r.interactions)||{}},o._getInteractionFromWindowIfPresent=function(t){return this._getInteractionsObjectFromWindow()[t]},o.flush=function(){this.reporter.flush()},o._handleBlackboxPerformance=function(){var t=this,e=Object(g.a)(),n=e[St];n&&this._handleBlackboxPerformanceEntries(e,n),e.addEventListener&&e.addEventListener(St,(function(n){var r=n.detail;return t._handleBlackboxPerformanceEntries(e,r)}))},o._handleBlackboxPerformanceEntries=function(t,e){var n=this;e.filter((function(t){return t.then})).forEach((function(e){e.then((function(e){switch(e.entryType){case"loaded":n._webVitalsLoadedPromise.resolve(e);break;case"first-input":n._webVitalsFirstInputPromise.resolve(e);break;case"page-transitions":case"crux-cls-s":case"responsiveness":return void(e.eventName&&t.addEventListener&&t.addEventListener(e.eventName,(function(t){var e=t.detail;return n._sendBlackboxMeasurement(e)})))}n._sendBlackboxMeasurement(e)}))}))},o._sendBlackboxMeasurement=function(t){var e=this.dataItems.biBlackbox(t);if(e){var n,r=this.dataItems.blackboxPerformance(t),o=(new Q).addItem(e).addItem(r);"loaded"===t.entryType&&(n={useBatch:!1}),this._report(o,"bpm",n),"crux"===t.entryType&&this.flush()}},o.getLoggerForWidget=function(e){var n=e.appName,r=e.appId,o=e.widgetId,i=e.version,a=e.timeoutHook,s=e.startHook,u=e.endHook,c=e.useGlobalLogger,d=e.paramsOverrides,p=e.phasesConfig;return new t(n||r+"_"+o,i||this.getAppVersion(),c?this.reporter:y({biLoggerFactory:this.reporter._factory,preset:this._preset}),{isServerSide:this.isServerSide,appId:r,widgetId:o,sessionId:this.sessionId,phasesConfig:p||dt.SEND_ON_START,isPersistent:this.isPersistent,timeoutHook:a,startHook:s,endHook:u,customParams:this._customParams,presetType:this._presetType,paramsOverrides:yt(yt({},this._constructorParamsOverrides),d)})},o._getUnReportedErrorFlows=function(t){var e=this;return t.filter((function(t){return!e._firstErrorFiredInFlow[t]}))},o.reportErrorThrownOncePerFlow=function(){var t=this,e=this._getFlowsOfError(),n=this._getUnReportedErrorFlows(e);n.length&&n.forEach((function(e){t._firstErrorFiredInFlow[e]=!0;var n=t.dataSource.addItem({interactionName:e}).addItem(t.dataItems.biError());t._report(n)}))},o._errorHappenedInOneOfAppLoadFlows=function(){return this._errorHappenedInAppLoadFlow()||this._errorHappenedInAppLoadingPhasesFlow()},o._errorHappenedInAppLoadFlow=function(){var t=this._getAppLoadStartedIndication(),e=this._getAppLoadedIndication();return t&&!e},o._getAppLoadStartedIndication=function(){var t,e="[fedops] "+this.appName+" app-load-started",n=null==(t=j(e))?void 0:t[0],r=this._times.getLoadStartTime();return n||r},o._getAppLoadedIndication=function(){var t,e="[fedops] "+this.appName+" app-loaded";return(null==(t=j(e))?void 0:t[0])||this._appLoadedCalled[this.appName]},o._errorHappenedInAppLoadingPhasesFlow=function(t){for(var e,n=(void 0===t?{appId:this.appName}:t).appId,r=this._getAppLoadingPhaseMarksForApp({appId:n}),o=Pt(this._getPhaseNamesFromMarks(r));!(e=o()).done;){var i=e.value,a=this._getTimesOfPhase({phaseName:i,appPhasesMarks:r,appId:n}),s=a.startMarkTime,u=a.finishMarkTime;if(s&&!u)return!0}return!1},o._getFlowsOfError=function(){var t=this._errorHappenedInOneOfAppLoadFlows()?["app-load"]:[];return[].concat(t,this._getInteractionNamesWhereErrorHappened())},o._getInteractionNamesWhereErrorHappened=function(){var t=this._getInteractionNamesWhereErrorHappenedFromInstance();if(t.length)return t;var e=Object.keys(this._getInteractionsObjectFromWindow());return e.length?e:this._getInteractionNamesWhereErrorHappenedFromPerformanceMarks()},o._getInteractionNamesWhereErrorHappenedFromInstance=function(){return Object.keys(this._outgoingInteractions)},o._getInteractionNamesWhereErrorHappenedFromPerformanceMarks=function(){var e=this._getInteractionMarksOfCurrentApp();return t._getInteractionsThatDidntEndFromMarks(e)},o._getInteractionMarksOfCurrentApp=function(){var t=this;return O().reduce((function(e,n){var r=function(t){var e=Y.exec(t);if(e)return{appName:e[1],interactionName:e[2]}}(n.name);return r&&r.appName===t.appName&&(e[r.interactionName]=e[r.interactionName]||[],e[r.interactionName].push({startTime:n.startTime,name:n.name})),e}),{})},t._getInteractionsThatDidntEndFromMarks=function(e){var n=[];for(var r in e)if(e.hasOwnProperty(r)){var o=t._countStartedEndedInteractionMarks(e[r]),i=o.startedInteractions,a=o.endedInteractions;(!i&&!a||i-a!=0)&&n.push(r)}return n},t._countStartedEndedInteractionMarks=function(t){var e=0,n=0;return t.forEach((function(t){t.name.includes("started")?e++:t.name.includes("ended")&&n++})),{startedInteractions:e,endedInteractions:n}},o.registerPlatformTenants=function(t){this._platformTenantsPromise.resolve(t)},o._reportWebVitalsWhenAvailable=function(){var t=this;Promise.all([this._webVitalsLoadedPromise,this._platformTenantsPromise]).then((function(e){var n=e[0],r=e[1],o=n.cls,i=n.lcp;r.forEach((function(e){var n=t.dataSource.addItem(t.dataItems.webVitalsLoaded()).addItem(t.dataItems.appName({appName:e})).addItem({cls:o,lcp:i});t._report(n)}))})),Promise.all([this._webVitalsFirstInputPromise,this._platformTenantsPromise]).then((function(e){var n=e[0],r=e[1],o=n.delay;r.forEach((function(e){var n=t.dataSource.addItem(t.dataItems.webVitalsFirstInput()).addItem(t.dataItems.appName({appName:e})).addItem({fid:o});t._report(n)}))}))},e=t,(n=[{key:"dataSource",get:function(){return this.dataSourceBase.clone()}},{key:"sessionId",get:function(){return this.getParam("sessionId")},set:function(t){this.params.sessionId=t}}])&&wt(e.prototype,n),r&&wt(e,r),Object.defineProperty(e,"prototype",{writable:!1}),t}();function xt(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function jt(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?xt(Object(n),!0).forEach((function(e){Dt(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):xt(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function Dt(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function kt(t,e){if(void 0===e&&(e={}),!t)return null;var n=t.replace(/\./g,"-").toLowerCase();Object(D.c)(n);var r=jt(jt({},e),{},{preset:m(e.presetType)}),o=y(r);return new Tt(n,Object(g.a)().__CI_APP_VERSION__||"0.0.0",o,r)}function Ft(t,e){var n=void 0===e?{}:e,r=n.artifactData,o=n.presetType,i=n.isPersistent,a=n.paramsOverrides;Object(D.c)(t),Object(D.d)(t,E()||S());var s=tt.getSessionId();Object(D.e)(s);var u=m(o),c=!0===i?u.persistentEndpoint:u.nonPersistentEndpoint,d=new URLSearchParams;d.set("appName",t),d.set("src",u.src),d.set("evid",u.appLoadStart.eventId),d.set("session_id",s),d.set("_",Math.random()),d.set("is_rollout",!1),r&&(d.set("artifactId",r.id),d.set("artifactVersion",r.version),d.set("is_rollout",r.isRollout));var p=(new mt).getCookieOverridesForApp(t);Object.keys(p||{}).forEach((function(t){return d.set(t,p[t])})),Object.keys(a||{}).forEach((function(t){return d.set(t,a[t])}));var f="//frog.wix.com/"+c+"?"+d.toString();Object(g.b)()?Object(g.c)(f):(new Image).src=f}var Ct=dt},function(t,e,n){"use strict";var r=n(29),o=n(14),i=n(15),a=n(6);t.exports.BiLoggerFactory=r,t.exports.BiLogger=o,t.exports.BiLoggerManager=i.BiLoggerManager,t.exports.factory=function(){return new r},t.exports.manager=i.manager,t.exports.createBatchQueue=function(){return new a}},function(t,e,n){"use strict";var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}();var i=n(5),a=n(14),s=n(15),u=n(6),c=function(){function t(){!function(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this._publishers=[],this._validators=[],this._defaults={},this._nonEssentialDefaults={},this._events={},this._isMuted=!1,this._eventTransformer=null,this._payloadTransformer=null,this._consentPolicyGetter=null,this._maxBatchSize=null,this._batchQueue=null}return o(t,[{key:"addPublisher",value:function(t){return i.defined(t,"Publisher must be provided"),i.ok("function"==typeof t,"Expected a publisher function"),this._publishers.push(t),this}},{key:"addValidator",value:function(t){return i.defined(t,"Validator must be provided"),i.ok("object"===(void 0===t?"undefined":r(t))&&t,"Expected a validator object"),i.ok(t.execute&&t.match,"Provided validator does not match the interface"),this._validators.push(t),this}},{key:"setDefaults",value:function(t){return i.defined(t,"Defaults must be provided"),i.object(t,"Defaults must be an object"),this._defaults=t,this}},{key:"updateDefaults",value:function(t){return i.defined(t,"Defaults must be provided"),i.object(t,"Defaults must be an object"),Object.assign(this._defaults,t),this}},{key:"updateNonEssentialDefaults",value:function(t){return i.defined(t,"Non-essential Defaults must be provided"),i.object(t,"Non-essential Defaults must be an object"),Object.assign(this._nonEssentialDefaults,t),this}},{key:"setEvents",value:function(t){return i.defined(t,"Events must be provided"),i.object(t,"Events must be an object"),this._events=t,this}},{key:"setDefaultValueTimeout",value:function(t){return i.defined(t,"Default Value Timeout must be provided"),this._defaultValueTimeout=t,this}},{key:"setDefaultContinueOnFail",value:function(t){return i.defined(t,"Default Continue On Fail must be provided"),this._defaultContinueOnFail=t,this}},{key:"setPublisherFailHandler",value:function(t){return i.defined(t,"Publisher Fail Handler must be provided"),this._onPublisherFailHandler=t,this}},{key:"setMuted",value:function(t){return i.defined(t,"Is Muted must be provided"),i.boolean(t,"Is Muted must be a boolean"),this._isMuted=t,this}},{key:"setMaxBatchSize",value:function(t){return i.defined(t,"Max Batch Size must be provided"),i.number(t,"Max Batch Size must be a number"),i.ok(t>0,"Max Batch Size must be higher than 0"),this._maxBatchSize=t,this}},{key:"setGlobalBatchQueue",value:function(t){return i.defined(t,"Global Batch Queue must be provided"),i.ok(t instanceof u,"Global Batch Queue must be an instance of BatchQueue"),this._globalBatchQueue=t,this}},{key:"withEventTransformer",value:function(t){return i.defined(t,"Event Transformer must be provided"),i.func(t,"Event Transformer must be a function"),this._eventTransformer=t,this}},{key:"withPayloadTransformer",value:function(t){return i.defined(t,"Payload Transformer must be provided"),i.func(t,"Payload Transformer must be a function"),this._payloadTransformer=t,this}},{key:"withConsentPolicyGetter",value:function(t){return i.defined(t,"Consent Policy Getter must be provided"),i.func(t,"Consent Policy Getter must be a function"),this._consentPolicyGetter=t,this}},{key:"logger",value:function(t){var e=this,n=new a({publishers:this._publishers,validators:this._validators,defaults:this._defaults,events:this._events,defaultValueTimeout:this._defaultValueTimeout,defaultContinueOnFail:this._defaultContinueOnFail,onPublisherFailHandler:this._onPublisherFailHandler,isMuted:function(){return e._isMuted},eventTransformer:this._eventTransformer,payloadTransformer:this._payloadTransformer,consentPolicyGetter:this._consentPolicyGetter,nonEssentialDefaults:this._nonEssentialDefaults,maxBatchSize:this._maxBatchSize,globalBatchQueue:this._globalBatchQueue},t);return s.manager.notifyLoggerCreated(n),n}}]),t}();t.exports=c},function(t,e,n){"use strict";t.exports.mapValues=function(t,e){return t?Object.keys(t).reduce((function(n,r){return n[r]=e(t[r],r,t),n}),{}):{}},t.exports.filterValues=function(t,e){return t?Object.keys(t).reduce((function(n,r){return e(t[r],r,t)&&(n[r]=t[r]),n}),{}):{}}},function(t,e,n){"use strict";t.exports.timedPromise=function(t,e){var n=e.message,r=e.timeout,o=new Promise((function(t,e){setTimeout(e,r,n?"Timeout: "+n:"Timeout")}));return Promise.race([t,o])},t.exports.allAsObject=function(t){var e=Object.keys(t);return Promise.all(e.map((function(e){return t[e]}))).then((function(t){return t.reduce((function(t,n,r){return t[e[r]]=n,t}),{})}))}},function(t,e,n){"use strict";t.exports={error:function(){var t;console&&console.error&&(t=console).error.apply(t,arguments)}}},function(t,e,n){"use strict";t.exports=function(t,e,n){var r=void 0;return function(){var o=this,i=arguments,a=function(){r=null,n||t.apply(o,i)},s=n&&!r;clearTimeout(r),r=setTimeout(a,e),s&&t.apply(o,i)}}},function(t,e,n){"use strict";t.exports=function(t,e){var n=void 0;return function(){for(var r=arguments.length,o=Array(r),i=0;i<r;i++)o[i]=arguments[i];n||(n=setTimeout((function(){t.apply(void 0,o),n=null}),e))}}},function(t,e,n){"use strict";var r={functional:!0,analytics:!0,__default:!0},o=function(t){return!1===t.functional||!1===t.analytics};t.exports={shouldMuteNonEssentials:o,shouldMuteByCategory:function(t,e){return"essential"!==e&&("functional"===e||"analytics"===e?!1===t[e]:o(t))},getPolicy:function(t){return"function"==typeof t&&t()||r}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.ok=e.object=e.defined=void 0;var r=n(7);e.defined=function(t,e){if(void 0===t)throw new r.AssertionError(e)},e.object=function(t,e){if(void 0!==t&&("object"!=typeof t||Array.isArray(t)||null===t))throw new r.AssertionError(e)},e.ok=function(t,e){if(!t)throw new r.AssertionError(e)}},function(t,e,n){"use strict";var r=this&&this.__assign||function(){return(r=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var o in e=arguments[n])Object.prototype.hasOwnProperty.call(e,o)&&(t[o]=e[o]);return t}).apply(this,arguments)},o=this&&this.__rest||function(t,e){var n={};for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&e.indexOf(r)<0&&(n[r]=t[r]);if(null!=t&&"function"==typeof Object.getOwnPropertySymbols){var o=0;for(r=Object.getOwnPropertySymbols(t);o<r.length;o++)e.indexOf(r[o])<0&&Object.prototype.propertyIsEnumerable.call(t,r[o])&&(n[r[o]]=t[r[o]])}return n};Object.defineProperty(e,"__esModule",{value:!0}),e.getTransformers=e.getPublisher=e.postMessagePublisher=e.xhrPublisher=e.fetchPublisher=e.beaconPublisher=e.imagePublisher=e.resolvePublisher=void 0;var i=n(16),a=n(3),s=n(7),u=n(10),c=n(38),d=function(t){return t.useBatch?"POST":"GET"};function p(t){return void 0===t&&(t={}),function(e,n){void 0===n&&(n={});var r=i.buildBiUrl(t,e,n);return c.beaconTransport(r,e,!!n.useBatch).catch((function(){var t=d(n);return n.useBatch?c.fetchTransport(r,e,t).catch((function(n){return n instanceof s.APINotSupportedError?c.xhrTransport(r,e,t):Promise.reject(n)})):c.pixelTransport(r,n.image)}))}}function f(t,e){return void 0===t&&(t={}),function(n,r){void 0===r&&(r={});var o=i.buildBiUrl(t,n,r),a=d(r);return c.fetchTransport(o,n,a,e).catch((function(t){return t instanceof s.APINotSupportedError?c.xhrTransport(o,n,a):Promise.reject(t)}))}}function h(t,e){return void 0===t&&(t={}),function(t){return c.postMessageTransport(t,e)}}e.resolvePublisher=function(t,e){var n,r;return t.publishMethod===u.PublishMethods.PostMessage?(n=h,r=e&&e[u.PublishMethods.PostMessage]):t.publishMethod===u.PublishMethods.Fetch?(n=f,r=e&&e[u.PublishMethods.Fetch]):n=a.isWebWorker()?f:p,n(t,r)},e.imagePublisher=function(t){return void 0===t&&(t={}),function(e,n){if(void 0===n&&(n={}),n.useBatch)throw new s.APINotSupportedError("Can't use image publisher to send batched events.");var r=i.buildBiUrl(t,e,n);return c.pixelTransport(r,n.image)}},e.beaconPublisher=p,e.fetchPublisher=f,e.xhrPublisher=function(t){return void 0===t&&(t={}),function(e,n){void 0===n&&(n={});var r=i.buildBiUrl(t,e,n),o=d(n);return c.xhrTransport(r,e,o)}},e.postMessagePublisher=h,e.getPublisher=function(t,n){return e.resolvePublisher(t,n)},e.getTransformers=function(t,e){var n,i;e&&("function"!=typeof e&&e.postMessage&&t.publishMethod===u.PublishMethods.PostMessage?i=e.postMessage:"function"==typeof e&&(n=e));return{eventTransformer:n,payloadTransformer:function(e,n){if(n.useBatch){var a=function(e){return(null==e?void 0:e.endpoint)||n.endpoint||t.endpoint};e.e=e.e.map((function(t){var e=t.context,n=o(t,["context"]);return r(r({},n),{f:r(r({},n.f),{_rp:a(e)})})}))}return i?i(e):e}}}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.postMessageTransport=e.xhrTransport=e.fetchTransport=e.pixelTransport=e.beaconTransport=void 0;var r=n(8),o=n(7);e.beaconTransport=function(t,e,n){return void 0===n&&(n=!1),new Promise((function(o,i){return r.sendBeacon(t,n?JSON.stringify(e):void 0)?o():i(new Error("Transport Error: Cannot send bi using beacon"))}))},e.pixelTransport=function(t,e){return new Promise((function(n,r){var o=e||new window.Image(0,0);o.onload=function(){return n()},o.onerror=function(){return r(new Error("Transport Error: Cannot send bi using pixel"))},o.src=t}))},e.fetchTransport=function(t,e,n,r){if(void 0===n&&(n="GET"),void 0===r){if("undefined"==typeof fetch)return Promise.reject(new o.APINotSupportedError("fetch"));r=fetch}var i={method:n,credentials:"include"};return"POST"===n?i.body=JSON.stringify(e):i.keepalive=!0,r(t,i).then((function(t){if(!t.ok)throw Error("Transport Error: Cannot send bi using fetch. Status: "+t.status)}))},e.xhrTransport=function(t,e,n){return void 0===n&&(n="GET"),new Promise((function(r,o){var i=new XMLHttpRequest;i.open(n,""+location.protocol+t),i.onload=r,i.onerror=function(){o(new Error("Transport Error: Cannot send bi using xhr."))},i.withCredentials=!0,"POST"===n?i.send(JSON.stringify(e)):i.send()}))},e.postMessageTransport=function(t,e){void 0===e&&(e=self.postMessage);var n=[t];return"undefined"==typeof WorkerGlobalScope&&n.push("*"),e.apply(self,n)}},function(t,e,n){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.getCommonDefaults=e.getUserDefaults=e.transformDefaults=void 0;var r=n(9),o=n(8),i=n(17),a=n(16);e.transformDefaults=function(t){return Object.keys(t).reduce((function(e,n){var o=r.EventContextMap[n]||n;return r.EventContextMap[n]&&void 0!==t[n]?e[o]=t[n]:e[n]=t[n],e}),{})},e.getUserDefaults=function(){return a.getCookies({clientId:"_wixCIDX",uuid:{name:"_wixUIDX",transform:function(t){return"string"==typeof t&&t.split("|")[1]}}})},e.getCommonDefaults=function(t,n){return e.transformDefaults({brandId:function(){return i.getBrand(t)},siteBranchId:function(){return i.getBranchId(t)},ms:function(){return Math.round(o.now())},lv:r.LoggerVersion})}}])}));
//# sourceMappingURL=fedops-logger.bundle.min.js.map